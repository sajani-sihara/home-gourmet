<!doctype html>
<html>

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home Gourmet</title>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" href="./styles/home.css">

    <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script> -->

</head>

<body>
    <div data-role="page" id="Home">
        <div id="hg-header" data-role="header" data-position="fixed">
            <div class="hg-logo-div">
                <a class="hg-button" id="logo-btn" href="home.html" target="_self" class="ui-btn"><img src="./images/Logo.png" height="62.56px"></a>
            </div>
            <div class="hg-header-icon-div">
                <a href="#Page2" class="ui-btn" id="hg-icon-btn"><i data-feather="user"></i></a>
                <a href="#Page2" class="ui-btn" id="hg-icon-btn"><i data-feather="shopping-cart"></i></a>
                <a href="#Menu" data-transition="slide" class="ui-btn" id="hg-icon-btn-right"><i
                        data-feather="menu"></i></a>
            </div>
        </div>

        <!-- Write Email Address Dialog -->

        <div data-role="page" style="z-index: 100000000000;position: absolute;margin-top: 40%;" id="write-comment-dialog" data-dialog="true" data-close-btn="right">
            <div data-role="header" id="hg-dialog-header">
                <h2 class="hg-dialog-main-heading" style="margin-left: 20px; margin-top: 20px;">Send email</h2>
                <a href="#" class="ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
            </div>
            <div style="background-color:white;" class="ui-content" role="main">
                <div class="hg-dialog-text"> Share your favourites list with this email.</div>
                <input id="hg-input-post-comment" type="text" placeholder="Enter email address">
                <div class="hg-post-comment-btn">
                    <a id="hg-post-comment-btn" class="ui-btn">Send Email</a>
                </div>
            </div>
        </div>

        <!-- Email Sent Dialog -->
        <div data-role="page" id="comment-added-dialog" data-dialog="true" data-close-btn="none" style="position: absolute;margin-top: 40%;">
            <div data-role="header" id="hg-dialog-header">
                <img class="hg-dialog-main-img" src="./images/dialog-tick.png">
                <h2  style=" font-family: 'Poppins', sans-serif;
                font-weight: 400;
                font-size: large;
                padding-left: 20px;float: right !important; margin: 10% 25% 0% 0% !important;">Email was sent!</h2>
            </div>
            <div class="ui-content" style="background-color: white;" role="main">

                <div class="hg-dialog-text">Your favourites list has been emailed successfully. 
                </div>
                <div class="hg-order-view-btn">
                    <a id="hg-success-comment-btn" class="ui-btn">Cancel</a>
                </div>
            </div>
        </div>

        <div role="main" id="hg-main">
            <div style="margin:10px;">
                <h2 class="hg-main-food-item-heading inline">Favourites</h2>
            </div>
            <div style="padding-left:20px; padding-right: 20px; margin-bottom: 20px;">
                <input type="search" name="search" id="hg-home-search" value="" placeholder="Search for restaurant">
            </div>

            <div id="fav-container"></div>
         
            <div id="hg-footer" data-role="footer" data-position="fixed">
                <div style="background-color:#f7f5f9; height: 69px; margin:0">
                    <div style="display: flex;flex-direction: row; justify-content: center; align-items:center;">
    
                        <div style="float: left; width:50%;">
                            <a style="margin-left:30px; width:50%" id="hg-order-btn-white" class="ui-btn">Delete</a>
                        </div>
                        <div style="float: right; width:50%;">
                            <a style="margin-left:20px; width:50%" id="hg-order-btn" class="ui-btn"> Send email</a>
                        </div>
    
                    </div>

                </div>
            </div>



        </div>

        <!--Footer-->
        <div id="hg-footer" data-role="footer">

            <div class="container">
                <div class="nav-wrapper">
                    <nav class="nav">
                        <ul class="nav-list ul-reset">
                            <li class="nav-item">
                                <div class="nav-item-inner">
                                    <a href="#" class="nav-item-inner-heading plus">
                                        <p id="hg-footer-heading">About</p>
                                    </a>
                                    </a>
                                    <ul class="nav-sub-list ul-reset">
                                        <div class="nav-sub-list-inner">
                                            <li class="nav-sub-item">
                                                <p>Founded in 2020, Home Gourmet is the most widely used home-cooked food delivery app in Sri Lanka today. <u>Read more</u></p>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                            </li>
                            <li class="nav-item">
                                <div class="nav-item-inner">
                                    <a href="#" class="nav-item-inner-heading plus">
                                        <p id="hg-footer-heading">Contact</p>
                                    </a>
                                    <ul class="nav-sub-list ul-reset">
                                        <div class="nav-sub-list-inner">
                                            <li class="nav-sub-item">
                                                <p>Email : homegourmet@gmail.com</p>
                                                <p>Mobile : (+94) 77 899 3645</p>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                            </li>
                            <li class="nav-item">
                                <div class="nav-item-inner">
                                    <a href="#" class="nav-item-inner-heading plus">
                                        <p id="hg-footer-heading">Follow Us</p>
                                    </a>
                                    <ul class="nav-sub-list ul-reset">
                                        <div class="nav-sub-list-inner">
                                            <li class="nav-sub-item">
                                                <p>Instagram </p>
                                                <p>Facebook </p>
                                                <p>Pinterest </p>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>


            <div id="hg-footer-links-div">
                <a id="hg-footer-links">Terms and Conditions</a> . <a id="hg-footer-links">Privacy Statement</a>
            </div>
        </div>

    </div>



    <!-- First menu-->
    <div data-role="page" id="Menu">

        <div data-role="header" id="hg-header">
            <div class="hg-menu-logo-div">
                <a class="hg-button" id="logo-btn" href="home.html" target="_self" class="ui-btn"><img src="./images/Logo.png" height="62.56px"></a>
                <a id="hg-icon-btn-right-close" href="#Home" data-transition="slide" class="ui-btn" data-direction="reverse"><i data-feather="x"></i></a>

            </div>

        </div>

        <div role="main" class="ui-content" id="hg-menu" data-transition="slide">

            <div data-role="controlgroup" data-type="vertical">
                <a href="#Menu2" data-transition="slide" class="ui-btn" id="hg-menu-btn">Categories
                    <i id="hg-icon-chevron" data-feather="chevron-right"></i></a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Promotions</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Rewards Center</a>
                <a href="./orders.html" target="_self" class="ui-btn" id="hg-menu-btn">Orders</a>
                <a href="favourites.html" class="ui-btn" id="hg-menu-btn">Favorites</a>
                <a href="./qr-scanner.html" target="_self" class="ui-btn" id="hg-menu-btn">QR Scanner</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">About Us</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Sign In</a>
            </div>
        </div>


    </div>

    <!-- Second menu-->

    <div data-role="page" id="Menu2">

        <div data-role="header" id="hg-header">
            <div id="hg-menu2-heading-div">
                <h2 id="hg-menu2-heading">Categories</h2>
                <a id="hg-icon-btn-right-close-menu2" href="#Menu" data-transition="slide" class="ui-btn" data-direction="reverse"><i data-feather="chevron-left"></i></a>

            </div>

        </div>

        <div role="main" class="ui-content" id="hg-menu" data-transition="slide">

            <div data-role="controlgroup" data-type="vertical">
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Chinese</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Bakery</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Italian</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Burgers</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Desserts</a>
                <a href="orders.html" class="ui-btn" id="hg-menu-btn">Drinks</a>
            </div>
        </div>
    </div>


</body>

<script>
    feather.replace()

    function accordion(section, heading, list) {
        $(section).each(function() {
            var act = 'active',
                actClass = '.active',
                that = $(this);

            function tglH() {
                that.find(list).slideToggle(250);
            }

            function open(click) {
                $(click).toggleClass('plus minus');
                tglH();
                that.find(list).addClass(act);
            }

            function close(click) {
                $(click).toggleClass('minus plus');
                tglH();
                that.find(list).removeClass(act);
            }

            if (that.find(list).length == 0) {
                $(this).find(heading).removeClass('plus').addClass('no-sub');
            } else {
                $(this).find(heading).click(function(e) {
                    e.preventDefault();
                });
            }

            $(this).find(heading).click(function() {
                if ($(this).hasClass('minus')) {
                    // close this menu
                    close(this);
                    that.find(list).removeClass(act);
                } else if ($(this).hasClass('plus')) {
                    if ($(heading).hasClass('minus')) {
                        $(heading).each(function() {
                            if (!$(this).hasClass('no-sub')) {
                                $(this).removeClass('minus').addClass('plus');
                            }
                        })
                        $(section).each(function() {
                            if ($(this).find(list).hasClass(act)) {
                                $(actClass).slideToggle(250);
                                $(this).find(list).removeClass(act);
                            }
                        });
                        // open this menu
                        open(this);
                    } else if ($(this).hasClass('plus')) {
                        // open this menu
                        open(this);
                    }
                }
            })
        })
    }
    accordion('.nav-item', '.nav-item-inner-heading', '.nav-sub-list');

    var fav_item_1_name = localStorage.getItem('fav_item_1_name');
    var fav_item_1_img = localStorage.getItem('fav_item_1_img');

    if (fav_item_1_name && fav_item_1_img) {
        $("#fav-container").append(`<div style="padding: 10px 20px 0">
    <div style="border:1px solid #6E6E78;border-radius:5px;">
    <div style="display: flex;flex-direction: row; justify-content: left; ">
        <div style="float: left; width: 100px;height: 100px;">
            <img style=" width: 100px;height: 100px;" src="${fav_item_1_img}">
        </div>
        <div style="float: right; ">
            <div class="hg-view-order-main-text 1 inline" style="margin-top: 10px; ">${fav_item_1_name} <br></div>
                <div class ="hg-view-2" style="margin-top: 10px; margin-left: 10px;">
                <p style="margin-top:5px; margin-bottom: 0; font-family: 'Roboto', sans-serif; font-weight: 400; color: #2A2B2E; font-size: small;">Italian</p> 
                <div style="display: flex;flex-direction: row; justify-content: center; align-items:center;">
                    <i data-feather="star" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="margin-right: 10px; font-family: 'Roboto', sans-serif; margin-left: 4px; font-weight: 400; color: #2A2B2E; font-size: small;"> 4.5</p>
                    <i data-feather="clock" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="font-family: 'Roboto', sans-serif; font-weight: 400; margin-left: 4px; color: #2A2B2E; font-size: small;">10 - 25 mins</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>`)

    }

    var fav_item_2_name = localStorage.getItem('fav_item_2_name');
    var fav_item_2_img = localStorage.getItem('fav_item_2_img');

    if (fav_item_2_name && fav_item_2_img) {
        $("#fav-container").append(`<div style="padding: 15px 20px 15px;">
    <div style="border:1px solid #6E6E78;border-radius:5px;">
    <div style="display: flex;flex-direction: row; justify-content: left;">
        <div style="float: left; width: 100px;height: 100px;">
            <img style=" width: 100px;height: 100px;" src="${fav_item_2_img}">
        </div>
        <div style="float: right; ">
            <div class="hg-view-order-main-text 2 inline" style="margin-top: 10px;">${fav_item_2_name} <br></div>
                <div class ="hg-view-2" style="margin-top: 10px; margin-left: 10px;">
                <p style="margin-top:5px; margin-bottom: 0; font-family: 'Roboto', sans-serif; font-weight: 400; color: #2A2B2E; font-size: small;">Italian</p> 
                <div style="display: flex;flex-direction: row; justify-content: center; align-items:center;">
                    <i data-feather="star" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="margin-right: 10px; font-family: 'Roboto', sans-serif; margin-left: 4px; font-weight: 400; color: #2A2B2E; font-size: small;"> 4.4</p>
                    <i data-feather="clock" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="font-family: 'Roboto', sans-serif; font-weight: 400; margin-left: 4px; color: #2A2B2E; font-size: small;">20 - 25 mins</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>`)
    }

    var fav_item_3_name = localStorage.getItem('fav_item_3_name');
    var fav_item_3_img = localStorage.getItem('fav_item_3_img');

    if (fav_item_3_name && fav_item_3_img) {
        $("#fav-container").append(`<div style="padding: 0 20px 15px;">
    <div style="border:1px solid #6E6E78;border-radius:5px;">
    <div style="display: flex;flex-direction: row; justify-content: left;">
        <div style="float: left; width: 100px;height: 100px;">
            <img style=" width: 100px;height: 100px;" src="${fav_item_3_img}">
        </div>
        <div style="float: right; ">
            <div class="hg-view-order-main-text 3 inline" style="margin-top: 10px;">${fav_item_3_name} <br></div>
            <div class ="hg-view-2" style="margin-top: 10px; margin-left: 10px;">
                <p style="margin-top:5px; margin-bottom: 0; font-family: 'Roboto', sans-serif; font-weight: 400; color: #2A2B2E; font-size: small;">Italian</p> 
                <div style="display: flex;flex-direction: row; justify-content: center; align-items:center;">
                    <i data-feather="star" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="margin-right: 10px; font-family: 'Roboto', sans-serif; margin-left: 4px; font-weight: 400; color: #2A2B2E; font-size: small;"> 4.8</p>
                    <i data-feather="clock" style="color: #6E6E78; width: 15px; height:15px;"></i>
                    <p style="font-family: 'Roboto', sans-serif; font-weight: 400; margin-left: 4px; color: #2A2B2E; font-size: small;">15 - 25 mins</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>`)
    };


    $('#hg-post-comment-btn').click(function() {
        var email = $('#hg-input-post-comment').val();
        console.log(email);
        sendEmail(email);
    })
    $("#hg-order-btn").click(function() {
        $('#write-comment-dialog').show();
    });

    $(".ui-btn-icon-notext.ui-btn-right").click(function() {
        $('#write-comment-dialog').hide();
    });

    $("#hg-success-comment-btn").click(function() {
        $('#comment-added-dialog').hide();
    });

    function sendEmail(email) {
        var favs_1 = $(".hg-view-order-main-text.1").text()
        var favs_2 = $(".hg-view-order-main-text.2").text()
        var favs_3 = $(".hg-view-order-main-text.3").text()
        Email.send({
            Host: "smtp.gmail.com",
            Username: "homegourmet4@gmail.com",
            Password: "Homegourmet12",
            To: email,
            From: "homegourmet4@gmail.com",
            Subject: "My Favourite List",
            Body: `Favourite's list: <ul><li>${favs_1}</li><li>${favs_2}</li><li>${favs_3}</li></ul><br><br> With Regards, <br> Home Gourmet`
        }).then(
            message => {
                console.log(message);
                if (message == "ok" || message == "Ok" || message == "OK") {
                    $('#write-comment-dialog').hide();
                    $('#comment-added-dialog').show();
                }
            }
        );
    };



    $("#hg-order-btn-white").click(function() {
        $("#fav-container").html('')
    });
    feather.replace()
</script>
<script src="JS/favourite.js"></script>


</html>